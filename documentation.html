<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    
  <head>
    <link href="stylesheets/themes/smoothness/ui.all.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="javascripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="javascripts/jquery-ui-1.7.custom.min.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function(){
        jQuery("#tabs-top").tabs();
        jQuery(".taglib").tabs();
        jQuery(".source").accordion({collapsible: true, active: false, autoHeight: false });
      });
    </script>
  </head>
  <body>
    <div id="tabs-top">
      <ul>
        
          
  <li>
    <a href="#hobo-jquery-taglib">
      <span>
        hobo-jquery
      </span>
    </a>
  </li>

        
      </ul>
      <!-- unfortunately, <repeat> is problematic here -->
      
        <div class="taglib" id="hobo-jquery-taglib">
          <p>This is the jQuery plugin for Hobo. This plugin provides the jQuery UI widgets in a Hobo friendly manner, provides useful tags and functions for jQuery javascript coding, and provides additional composite tags.</p>

<p>To use, see the <a href='README.html'>installation instructions</a></p>

<p>The jQuery UI tags support all of the <a href='http://docs.jquery.com/UI'>options that the corresponding jQuery UI widgets provide</a>. For example:</p>

<pre><code>&lt;hjq-datepicker dateFormat=&quot;yy-mm-dd&quot; /&gt;</code></pre>

<p>Options that expect a type other than string can be provided by passing a ruby object:</p>

<pre><code>&lt;hjq-datepicker dayNamesMin=&quot;&[&#39;Di&#39;, &#39;Lu&#39;, &#39;Ma&#39;, &#39;Me&#39;, &#39;Je&#39;, &#39;Ve&#39;, &#39;Sa&#39;]&quot; /&gt;</code></pre>

<p>Events are also supported. Pass in a global Javascript function name:</p>

<pre><code>&lt;hjq-datepicker onSelect=&quot;hjq.log&quot; /&gt;</code></pre>
          <ul>
            
              
  <li>
    <a href="#annotate-tag-tag">
      <span>
        annotate-tag
      </span>
    </a>
  </li>

            
              
  <li>
    <a href="#hjq-assets-tag">
      <span>
        hjq-assets
      </span>
    </a>
  </li>

            
              
  <li>
    <a href="#hjq-datepicker-tag">
      <span>
        hjq-datepicker
      </span>
    </a>
  </li>

            
              
  <li>
    <a href="#hjq-input-many-tag">
      <span>
        hjq-input-many
      </span>
    </a>
  </li>

            
              
  <li>
    <a href="#hjq-input-many-item-tag">
      <span>
        hjq-input-many-item
      </span>
    </a>
  </li>

            
          </ul>
          
            <div id="annotate-tag-tag">
          
              <h2>annotate-tag</h2>
              
              <p>This is Hobo jQuery&#8217;s standard tag annotation method. This annotation is automatically added to Hobo jQuery tags, but you may wish to use it in your own tag definitions.</p>

<p>The current implementation uses HTML comments for annotation. This may change in the future, if somebody can suggest a better mechanism. <a href='http://www.1729.com/blog/HtmlAnnotations.html'>Here is a good discussion of the alternatives.</a></p>

<p>To use it, invoke this tag directly before the tag to annotate. To get the annotations, call hjq.getAnnotations with <em>this</em> set to the element that has been annotated. For example:</p>

<pre><code>&lt;def tag=&quot;mytag&quot;&gt;
  &lt;annotate-tag option_a=&quot;42&quot;/&gt;
  &lt;div class=&quot;hjq-annotated&quot;&gt;
    ...
  &lt;/div&gt;
&lt;/def&gt;

jQuery(this).find(&#39;.hjq-annotated&#39;).each(function() {
  var annotations = hjq.getAnnotations.call(this);
  ...
});</code></pre>
          
              
          
              

              <div class="source">
                <h3><a href="#">Source</a></h3>
                <pre><code>&lt;def tag='annotate-tag'&gt;
  &lt;%= &quot;&lt;!-- json_annotation (#{attributes.to_json}); --&gt;&quot; %&gt;
&lt;/def&gt;</code></pre>
              </div>
          
            </div>
          
            <div id="hjq-assets-tag">
          
              <h2>hjq-assets</h2>
              
              <p>These are the Hobo jQuery assets required by Hobo jQuery. You will probably wish to add this to your page definition:</p>

<pre><code>&lt;extend tag=&quot;page&quot;&gt;
  &lt;old-page merge&gt;
    &lt;custom-scripts:&gt;
      &lt;hjq-assets/&gt;
    &lt;/custom-scripts&gt;
  &lt;/old-page&gt;
&lt;/extend&gt;</code></pre>
          
              
          
              

              <div class="source">
                <h3><a href="#">Source</a></h3>
                <pre><code>&lt;def tag='hjq-assets'&gt;
  &lt;javascript name='jquery-1.3.2.min.js'/&gt;
  &lt;javascript name='jquery-ui-1.7.custom.min.js'/&gt;
  &lt;javascript name='hobo-jquery.js'/&gt;
  &lt;script type='text/javascript'&gt;
    jQuery.noConflict();
    jQuery(document).ready(function() {
      hjq.initialize.call(document);
    });
  &lt;/script&gt;
  &lt;stylesheet name='smoothness/jquery-ui-1.7.custom.css'/&gt;
  &lt;stylesheet name='hobo-jquery.css'/&gt;
&lt;/def&gt;</code></pre>
              </div>
          
            </div>
          
            <div id="hjq-datepicker-tag">
          
              <h2>hjq-datepicker</h2>
              
              <p>This is the <a href='http://docs.jquery.com/UI/Datepicker'>jQuery-UI datepicker</a>.</p>

<p>It&#8217;s probably easiest to add this to your application.dryml:</p>

<pre><code>&lt;def tag=&quot;input&quot; for=&quot;Date&quot;&gt;
  &lt;hjq-datepicker dateFormat=&quot;yy-mm-dd&quot; merge /&gt;
&lt;/def&gt;</code></pre>

<p>It&#8217;s probably useful to set global options such as dateFormat in application.dryml and set local options such as yearRange in the tag invocation:</p>

<pre><code>&lt;input:birthdate yearRange=&quot;1900:#{Date.today.year}&quot; /&gt;</code></pre>
          
              
          
              

              <div class="source">
                <h3><a href="#">Source</a></h3>
                <pre><code>&lt;def attrs='name, altField, altFormat, appendText, buttonImage, buttonImageOnly, buttonText, changeMonth, changeYear, closeText, constrainInput, currentText, dateFormat, dayNames, dayNamesMin, dayNamesShort, defaultDate, duration, firstDay, gotoCurrent, hideIfNoPrevNext, isRTL, maxDate, minDate, monthNames, monthNamesShort, navigationAsDateFormat, nextText, numberOfMonths, prevText, shortYearCutoff, showAnim, showButtonPanel, showCurrentAtPos, showMonthAfterYear, showOn, showOptions, showOtherMonths, stepMonths, yearRange, beforeShow, beforeShowDay, onChangeMonthYear, onClose, onSelect' tag='hjq-datepicker'&gt;
 &lt;% option_names=['altField', 'altFormat', 'appendText', 'buttonImage', 'buttonImageOnly', 'buttonText', 'changeMonth', 'changeYear', 'closeText', 'constrainInput', 'currentText', 'dateFormat', 'dayNames', 'dayNamesMin', 'dayNamesShort', 'defaultDate', 'duration', 'firstDay', 'gotoCurrent', 'hideIfNoPrevNext', 'isRTL', 'maxDate', 'minDate', 'monthNames', 'monthNamesShort', 'navigationAsDateFormat', 'nextText', 'numberOfMonths', 'prevText', 'shortYearCutoff', 'showAnim', 'showButtonPanel', 'showCurrentAtPos', 'showMonthAfterYear', 'showOn', 'showOptions', 'showOtherMonths', 'stepMonths', 'yearRange'] %&gt;
 &lt;% event_names=['beforeShow', 'beforeShowDay', 'onChangeMonthYear', 'onClose', 'onSelect'] %&gt;
 &lt;% options = {}; option_names.each {|n| options[n]=all_attributes[n] if all_attributes.has_key?(n) }  %&gt;
 &lt;% events = {}; event_names.each {|n| events[n]=all_attributes[n] if all_attributes.has_key?(n) } %&gt;
 &lt;annotate-tag tag='hjq-datepicker' events='&amp;events' init='hjq.datepicker.init' options='&amp;options'/&gt;
 &lt;% add_classes!(attributes, &quot;hjq-annotated&quot;); %&gt;
 &lt;%= text_field_tag(name, this, attributes) %&gt;
&lt;/def&gt;</code></pre>
              </div>
          
            </div>
          
            <div id="hjq-input-many-tag">
          
              <h2>hjq-input-many</h2>
              
              <p>Creates a sub-section of the form which the user can repeat using (+) and (-) buttons, in order to allow an entire <code>has_many</code> collection to be created/edited in a single form.</p>

<p>This tag is similar to the standard Hobo <code>&lt;input-many&gt;</code> tag, but it includes several additional features.</p>

<ul>
<li>it supports 0 length associations</li>

<li>it supports delayed initialization, required for some Javascript elements like the jQuery UI datepicker</li>

<li>it allows the (+) and (-) buttons to be customized</li>

<li>it provides a default for then <code>item</code> parameter</li>

<li>it copies from a template rather than cloning the current item and clearing it</li>

<li>the template may be overridden</li>

<li>javascript hooks for (+) and (-)</li>
</ul>

<p>It also fixes the following buglets in input-many:</p>

<ul>
<li>id&#8217;s of textareas and selects are adjusted properly</li>

<li>the original input-many didn&#8217;t clear textareas and select&#8217;s. We don&#8217;t have a clear -&gt; no buglet! :)</li>
</ul>

<p>Because this implementation contains more than one parameter, the default parameter from input-many has been renamed to <code>item</code>.</p>
          
              
                <h3>Parameters</h3>
                
  <ul>
    
      <li>item
        
  

      </li>
    
      <li>remove-item
        
  

      </li>
    
      <li>add-item
        
  

      </li>
    
      <li>empty-message
        
  

      </li>
    
      <li>add-item
        
  

      </li>
    
      <li>item
        
  

      </li>
    
      <li>add-item
        
  

      </li>
    
      <li>item
        
  

      </li>
    
      <li>remove-item
        
  

      </li>
    
      <li>add-item
        
  

      </li>
    
  </ul>

              
          
              <h3 id='example'>Example</h3>

<p>Say you are creating a new <code>Category</code> in your online shop, and you want to create some initial products <em>in the same form</em>, you can add the following to your form:</p>

<pre><code>&lt;hjq-input-many:products fields=&quot;name, price&quot; /&gt;</code></pre>

<p>You&#8217;ll often want to provide the <code>item</code> parameter:</p>

<pre><code>&lt;hjq-input-many:products&gt;&lt;item:&gt;&lt;field-list fields=&quot;name, price&quot; /&gt;&lt;/item:&gt;&lt;/hjq-input-many&gt;</code></pre>

<h3 id='attributes'>Attributes</h3>

<ul>
<li>
<p>minimum: the minimum number of items in the collection. Currently only &#8216;0&#8217; and &#8216;1&#8217; are supported values. The default is &#8216;0&#8217;.</p>
</li>

<li>
<p>fields: passed down to the <code>field-list</code> tag in the default <code>item</code>.</p>
</li>

<li>
<p>template: the default values for new items. Normally this functionality is better provided by Model.new, but it&#8217;s here if you need it.</p>
</li>

<li>
<p>add-hook: a javascript function to call after an item has been added. The context will be set to the new item.</p>
</li>

<li>
<p>remove-hook: a javascript function to call before an item is removed. The context will be set to the item. If the hook returns false, the remove is cancelled.</p>
</li>
</ul>

<h3 id='todo'>TODO</h3>

<ul>
<li>slide effect</li>
</ul>

              <div class="source">
                <h3><a href="#">Source</a></h3>
                <pre><code>&lt;def attrs='minimum, fields, new-template, remove-hook' polymorphic tag='hjq-input-many'&gt;
  &lt;set empty='&amp;this.empty?'/&gt;
  &lt;annotate-tag tag='hjq-input-many' merge-attrs='minimum, add-hook, remove-hook' init='hjq.input_many.init'/&gt;
  &lt;ul class='hjq-input-many #{this_field.dasherize} #{css_data :input_many_prefix, param_name_for_this} hjq-annotated'&gt;
    &lt;% template ||= this.try.new_candidate || this.member_class.new %&gt;
    &lt;% minimum ||= 0 ; minimum = minimum.to_i %&gt;
    &lt;li class='input-many-template'&gt;
      &lt;fake-field-context fake-field='-1' context='&amp;template'&gt;
        &lt;hjq-input-many-item param='item' merge-attrs='fields'/&gt;
      &lt;/fake-field-context&gt;
      &lt;div class='buttons'&gt;
        &lt;button param='remove-item'&gt;-&lt;/button&gt;
        &lt;button param='add-item'&gt;+&lt;/button&gt;
      &lt;/div&gt;
    &lt;/li&gt;
    &lt;li class='empty #{&amp;apos;hidden&amp;apos; unless this.empty? and minimum==0}'&gt;
      &lt;div param='empty-message'&gt;
        No &lt;%= this_field.pluralize %&gt;.
      &lt;/div&gt;
      &lt;div class='buttons'&gt;
        &lt;button param='add-item'&gt;+&lt;/button&gt;
      &lt;/div&gt;
    &lt;/li&gt;
    &lt;li if='&amp;(this.empty? &amp;&amp; minimum&gt;0)'&gt;
      &lt;fake-field-context fake-field='0' context='&amp;template'&gt;
        &lt;hjq-input-many-item param='item' merge-attrs='fields'/&gt;
      &lt;/fake-field-context&gt;
      &lt;div class='buttons'&gt;
        &lt;button param='add-item'&gt;+&lt;/button&gt;
      &lt;/div&gt;
    &lt;/li&gt;
    &lt;li class='#{&amp;apos;record-with-errors&amp;apos; unless this.errors.empty?}' repeat&gt;
      &lt;error-messages class='sub-record' without-heading/&gt;
      &lt;hidden-id-field/&gt;
      &lt;hjq-input-many-item param='item' merge-attrs='fields'/&gt;
      &lt;div class='buttons'&gt;
        &lt;button param='remove-item'&gt;-&lt;/button&gt;
        &lt;button param='add-item' if='&amp;last_item?'&gt;+&lt;/button&gt;
      &lt;/div&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/def&gt;</code></pre>
              </div>
          
            </div>
          
            <div id="hjq-input-many-item-tag">
          
              <h2>hjq-input-many-item</h2>
              
              <p>This is the default item used by <code>&lt;hjq-input-many&gt;</code>. Redefine or extend if desired.</p>
          
              
                <h3>Parameters</h3>
                
  <ul>
    
      <li>default
        
  

      </li>
    
  </ul>

              
          
              

              <div class="source">
                <h3><a href="#">Source</a></h3>
                <pre><code>&lt;def attrs='fields' tag='hjq-input-many-item'&gt;
  &lt;card param='default'&gt;
    &lt;header: replace/&gt;
    &lt;body:&gt;&lt;field-list merge-attrs='fields'/&gt;&lt;/body:&gt;
  &lt;/card&gt;
&lt;/def&gt;</code></pre>
              </div>
          
            </div>
          
        </div>
      
    </div>
  </body>

  </html>